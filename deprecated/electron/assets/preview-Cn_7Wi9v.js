import{r as w,B as L,C as N,D as F,j as g,x as O,w as G,s as j,E as J,G as q,H,u as V,c as y,F as C,J as $,i as f,o as m,t as b,h as I}from"./index-Ch2yKWqy.js";function B(e){return N()?(F(e),!0):!1}function S(e){return typeof e=="function"?e():g(e)}const k=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const z=Object.prototype.toString,K=e=>z.call(e)==="[object Object]",Q=()=>{};function U(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const s=t;t=void 0,s&&await s},n}function X(e,t,n={}){const{immediate:s=!0}=n,i=w(!1);let o=null;function l(){o&&(clearTimeout(o),o=null)}function d(){i.value=!1,l()}function p(...a){l(),i.value=!0,o=setTimeout(()=>{i.value=!1,o=null,e(...a)},S(t))}return s&&(i.value=!0,k&&p()),B(d),{isPending:L(i),start:p,stop:d}}function Y(e){var t;const n=S(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Z=k?window:void 0,M=k?window.navigator:void 0;function P(...e){let t,n,s,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,s,i]=e,t=Z):[t,n,s,i]=e,!t)return Q;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const o=[],l=()=>{o.forEach(r=>r()),o.length=0},d=(r,u,_,h)=>(r.addEventListener(u,_,h),()=>r.removeEventListener(u,_,h)),p=G(()=>[Y(t),S(i)],([r,u])=>{if(l(),!r)return;const _=K(u)?{...u}:u;o.push(...n.flatMap(h=>s.map(x=>d(r,h,x,_))))},{immediate:!0,flush:"post"}),a=()=>{p(),l()};return B(a),a}function ee(){const e=w(!1),t=q();return t&&J(()=>{e.value=!0},t),e}function R(e){const t=ee();return O(()=>(t.value,!!e()))}function T(e,t={}){const{controls:n=!1,navigator:s=M}=t,i=R(()=>s&&"permissions"in s),o=j(),l=typeof e=="string"?{name:e}:e,d=j(),p=()=>{var r,u;d.value=(u=(r=o.value)==null?void 0:r.state)!=null?u:"prompt"};P(o,"change",p);const a=U(async()=>{if(i.value){if(!o.value)try{o.value=await s.permissions.query(l)}catch{o.value=void 0}finally{p()}if(n)return H(o.value)}});return a(),n?{state:d,isSupported:i,query:a}:d}function te(e={}){const{navigator:t=M,read:n=!1,source:s,copiedDuring:i=1500,legacy:o=!1}=e,l=R(()=>t&&"clipboard"in t),d=T("clipboard-read"),p=T("clipboard-write"),a=O(()=>l.value||o),r=w(""),u=w(!1),_=X(()=>u.value=!1,i);function h(){l.value&&A(d.value)?t.clipboard.readText().then(c=>{r.value=c}):r.value=D()}a.value&&n&&P(["copy","cut"],h);async function x(c=S(s)){a.value&&c!=null&&(l.value&&A(p.value)?await t.clipboard.writeText(c):W(c),r.value=c,u.value=!0,_.start())}function W(c){const v=document.createElement("textarea");v.value=c??"",v.style.position="absolute",v.style.opacity="0",document.body.appendChild(v),v.select(),document.execCommand("copy"),v.remove()}function D(){var c,v,E;return(E=(v=(c=document==null?void 0:document.getSelection)==null?void 0:c.call(document))==null?void 0:v.toString())!=null?E:""}function A(c){return c==="granted"||c==="prompt"}return{isSupported:a,text:r,copied:u,copy:x}}function ne(e){const{title:t,link:n,date_source_author:s,content:i}=e,l=JSON.parse(i).join(`

`);return`${t}
${n}
${s}
${l}`}const oe=f("h2",{class:"flex items-center justify-between text-xl"},"Preview",-1),se={class:"card bg-neutral text-neutral-content w-full shadow-xl my-4"},ae={class:"card-body"},re={class:"card-title flex flex-row items-center justify-between"},ie={class:"flex gap-4"},ce=["onClick"],le={key:0},ue={key:1},de=["onClick"],pe=["href"],fe={class:"badge badge-primary"},ye={__name:"preview",setup(e){const t=V(),n=w("Hello"),{text:s,copy:i,copied:o,isSupported:l}=te({source:n});return(d,p)=>(m(),y(C,null,[oe,(m(!0),y(C,null,$(g(I).newsContents,a=>(m(),y("div",se,[f("div",ae,[f("div",re,[f("h2",null,b(a.title),1),f("div",ie,[f("button",{class:"btn btn-primary",onClick:r=>g(i)(g(ne)(a))},[g(o)?(m(),y("span",ue,"Copied!")):(m(),y("span",le,"Copy"))],8,ce),f("a",{class:"btn btn-secondary",onClick:r=>g(t).push({path:`/edit/${a.id}`,replace:!0})},"Edit",8,de)])]),f("p",null,b(a.date_source_author),1),f("a",{href:a.link},b(a.link),9,pe),f("div",fe,b(a.category),1),(m(!0),y(C,null,$(JSON.parse(a.content),r=>(m(),y("p",null,b(r),1))),256))])]))),256))],64))}};export{ye as default};
