import{I as M,L as A,a as F,s as N,S as h,b as k,A as G,N as z,d as Q,P as W,u as Y,e as j,f as U,g as B,h as T,r as $,w as H,c as D,i as t,j as R,k as y,t as q,l as E,v as S,m as J,F as X,o as I,n as Z}from"./index-DRau_-fS.js";var ee=(d,c,r)=>typeof d=="function"?d(c,r):d;function te(d,c,r){const u=c;r=typeof c=="object"?c:r;const p={...K,...r,commit:(r==null?void 0:r.commit)||K.commit};function b(o,e,a,V){var O;const l=e[A],L=e[F];l.has(u)||l.set(u,{data:N(),isLoading:N(!1),error:N(),to:o,options:p,children:new Set,resetPending(){this.pendingLoad=null,this.pendingTo=null},pendingLoad:null,pendingTo:null,staged:h,stagedError:null,commit:P});const n=l.get(u);if(n.pendingTo===o&&n.pendingLoad)return n.pendingLoad;const{error:i,isLoading:_,data:C}=n,f=e[oe],v=p.key||"";let w=h;if(f&&v in f&&(w=f[v],delete f[v]),w!==h)return C.value=w,n.pendingLoad=Promise.resolve();n.pendingTo=o,_.value=!0;const g=B();k([n,e,o]),n.staged=h,n.stagedError=i.value;const x=Promise.resolve(u(o,{signal:(O=o.meta[G])==null?void 0:O.signal})).then(m=>{n.pendingLoad===x&&(m instanceof z?o.meta[Q].push(m):(n.staged=m,n.stagedError=null))}).catch(m=>{if(n.pendingLoad===x&&(n.stagedError=m,!ee(p.lazy,o,a)||L))throw m}).finally(()=>{k(g),n.pendingLoad===x&&(_.value=!1,(p.commit==="immediate"||!e[W])&&n.commit(o))});return k(g),n.pendingLoad=x,x}function P(o){if(this.pendingTo===o){this.staged!==h&&(this.data.value=this.staged),this.error.value=this.stagedError,this.staged=h,this.stagedError=this.error.value,this.pendingTo=null,this.to=o;for(const e of this.children)e.commit(o)}}const s=()=>{const o=B(),[e,a,V]=o,l=a||Y(),L=V||j(),n=l[A];let i=n.get(u);(!i||e&&i.pendingTo!==L)&&l[U].runWithContext(()=>b(L,l,void 0)),i=n.get(u),e&&(e===i&&console.warn(`👶❌ "${p.key}" has itself as parent. This shouldn't be happening. Please report a bug with a reproduction to https://github.com/posva/unplugin-vue-router/`),e.children.add(i));const{data:_,error:C,isLoading:f}=i,v={data:_,error:C,isLoading:f,reload:(g=l.currentRoute.value)=>l[U].runWithContext(()=>b(g,l)).then(()=>i.commit(g))},w=i.pendingLoad.then(()=>i.staged===h?_.value:i.staged).catch(g=>e?Promise.reject(g):null);return k(o),Object.assign(w,v)};return s[M]=!0,s._={load:b,options:p,getEntry(o){return o[A].get(u)}},s}var K={lazy:!1,server:!0,commit:"after-load"},oe=Symbol();function ne(d){return T.newsContents[[d]-1]}const se={class:"flex w-full flex-row justify-between items-center"},ae=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-arrow-left"},[t("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),t("polyline",{points:"12 19 5 12 12 5"})],-1),ie={class:"flex grow text-xl"},re={key:0,class:"flex-none alert alert-warning"},le=t("div",{class:"tooltip tooltip-bottom","data-tip":"Changes will be automatically saved"},[t("span",null,"Saving...")],-1),de=[le],ue={key:1,class:"tooltip tooltip-bottom flex w-fit alert alert-success","data-tip":"Changes will be automatically saved"},ce=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),pe=t("span",null,"Saved",-1),ge=[ce,pe],he={class:"card bg-base-100 w-full shadow-xl py-4 flex h-full"},fe={class:"card-body"},me={class:"input input-bordered flex items-center gap-2"},_e={class:"input input-bordered flex items-center gap-2"},ve={class:"input input-bordered flex items-center gap-2"},we=["href"],xe={class:"input input-bordered flex items-center gap-2 pr-0"},ye=Z('<option disabled>Choose Category</option><option value="Qualcomm相關新聞">Qualcomm相關新聞</option><option value="MediaTek相關新聞">MediaTek相關新聞</option><option value="無線通訊市場">無線通訊市場</option><option value="智慧型手機/消費性電子產品"> 智慧型手機/消費性電子產品 </option><option value="其他業界重要訊息">其他業界重要訊息</option>',6),Ee=[ye],be=t("label",{class:"flex items-center gap-2 pl-4"}," Content: ",-1),Le=te("/edit/[id]",async d=>ne(d.params.id)),Se={__name:"edit.[id]",setup(d){const c=Y(),r=j(),{data:u,isLoading:p,error:b,reload:P}=Le(),s=$(u);return H(s.value,async(o,e)=>{T.isSaving=!0,console.log(e.title),T.isSaving=!1}),(o,e)=>(I(),D(X,null,[t("div",se,[t("button",{class:"btn btn-neutral mr-4",onClick:e[0]||(e[0]=a=>R(c).push("/preview"))},[ae,y("Back to Preview")]),t("h2",ie," Editing News Content No."+q(R(r).params.id),1),R(T).isSaving?(I(),D("div",re,de)):(I(),D("div",ue,ge))]),t("div",he,[t("div",fe,[t("label",me,[y(" Headline: "),E(t("input",{type:"text",class:"grow","onUpdate:modelValue":e[1]||(e[1]=a=>s.value.title=a)},null,512),[[S,s.value.title]])]),t("label",_e,[y(" Date / Source / Author: "),E(t("input",{type:"text",class:"grow","onUpdate:modelValue":e[2]||(e[2]=a=>s.value.date_source_author=a)},null,512),[[S,s.value.date_source_author]])]),t("label",ve,[y(" Link: "),E(t("input",{type:"text",class:"grow","onUpdate:modelValue":e[3]||(e[3]=a=>s.value.link=a)},null,512),[[S,s.value.link]]),t("a",{href:s.value.link},"Go to link",8,we)]),t("label",xe,[y(" Category: "),E(t("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>s.value.category=a),class:"select select-bordered w-full"},Ee,512),[[J,s.value.category]])]),be,E(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=a=>s.value.content=a),class:"flex grow textarea shadow-inner rounded-xl px-4 py-2 border-2 border-blue-200 resize-none"},null,512),[[S,s.value.content]])])])],64))}};export{Se as default,Le as useUserData};
